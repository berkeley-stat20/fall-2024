---
title: "A Grammar of Graphics"
format: stat20slides-revealjs
---

    
# Concept Questions
    
## What code was used to make the following plot?

```{r}
#| echo: false
#| message: false
library(stat20data)
library(tidyverse)
```


```{r}
penguins |>
  filter(species == "Gentoo") |>
  mutate(is_male = (sex == "male")) |>
  ggplot(mapping = 
           aes(x = body_mass_g,
               y = is_male)) +
  geom_boxplot() +
  labs(x = "Body Mass (in grams)",
      y =  "Male Penguin?",
      title = "Male Gentoo penguins have larger body masses")
  
```

. . .

-   Choose an answer at `pollev.com`. 


    
# Concept Activity

<!--

##

:::{.poll}
What are the aesthetics and geometry of this plot?

Answer at `pollev.com`
:::

```{r}
#| fig-align: center
#| fig-width: 11
library(tidyverse)
library(palmerpenguins)

ggplot(penguins, aes(x = bill_length_mm,
                     fill = species)) +
    geom_density() +
    theme_gray(base_size = 20)
```

```{r}
countdown::countdown(1, top = 0)
```


##

:::{.poll}
What has changed when moving from the left to the right?
:::

```{r}
#| fig-align: center
#| fig-width: 11
library(patchwork)
p1 <- ggplot(penguins, aes(x = bill_length_mm,
                           y = bill_depth_mm,
                           color = species)) +
    geom_point(size=2) +
    theme_gray(base_size = 20) +
    theme(legend.position = "none")
p2 <- ggplot(penguins, aes(x = bill_length_mm,
                           y = bill_depth_mm,
                           shape = species)) +
    geom_point(size=2) +
    theme_gray(base_size = 20) +
    theme(legend.position = "none")
p1 + p2
```

```{r}
countdown::countdown(1, top = 0)
```

-->

## Concept Activity

You will be watching a 2.5 minute video of a presentation by a scientist, Hans Rosling, who studied global public health. He presents data visualizations depicting the change in life expectancy and family size over several decades in the 20th century.

:::{.poll}
On a piece of note paper:

- Sketch out the data frame used to create the graphic and add the names of the variables.
- List the aesthetic attributes used to encode the data in the graphic.
- Identify the geometry used in the plot.
:::

## {data-menu-title="Hans Rosling's Gapminder"}

<center>
<iframe src="https://embed.ted.com/talks/hans_rosling_the_best_stats_you_ve_ever_seen" width="854" height="480" style="position:absolute;left:0;top:0;width:100%;height:100%" frameborder="0" scrolling="no" allowfullscreen></iframe>
</center>

##

Please turn to your neighbors and...

:::{.poll}
Discuss what you came up with in terms of . . .

- the variables present in the data frame
- the aesthetic attributes used to encode that data in the plot
- the geometry
:::

{{< countdown "1:00" >}}


## What were the variables and aesthetic attributes?

. . .

:::: {.columns}

::: {.column width="50%"}

#### Visual Cues / Aesthetics

- Location along the x-axis
- Location along the y-axis
- Size of point
- Color of point
- Animation
:::

::: {.column width="50%"}
#### Variables

- Fertility rate
- Life expectancy
- Population
- Region
- Year
:::

::::


## What did the data frame look like?


What was the unit of observation? What were the variables? What were their type?

. . . 

:::: {.columns}

::: {.column width="50%"}
#### Unit of observation

- A country in a given year
:::

::: {.column width="50%"}
#### Variables

- Fertility rate (continuous)
- Life expectancy (continuous)
- Population (continuous)
- Region (nominal)
- Year (discrete)
:::

::::

```{r}
#| echo: false
#| eval: false
## don't use the gapminder package data. Remake to have the original vars: life expectancy and fertility rate
library(gapminder)
gapminder |>
  slice(1, 10) |>
  kable() |>
  kable_styling(latex_options = "striped")
```


## What geometry is used to represent the observations?

. . .

- Points

# Quiz Recap

-   Head to `pollev.com` for a series of former quiz questions and quiz-level questions! *Make sure you take notes*. 

## What type of claim was made?

> The group *Morning Consult* conducted a poll of a representative sample of registered 1,256 Republican voters on August 24, 2023, asking them who they planned to vote for in the primary eleection. 58% of respondents replied "Trump" and 14% replied "DeSantis". A major news outlet ran a headline, "Trump leads DeSantis by 44 points among registered Republican voters."
. . . 

{{< countdown "1:00" >}}

## What type of variable is listeners?

![]("images/spotify.png"){fig-alt="A dataframe with a column labelled 'Listeners (in million)' with values 40, 66, 60, 73, 57, 75, and 13'}

. . . 

{{< countdown "1:00" >}}


## What type of proportion is used?

![]("images/q1.png"){fig-alt="An image of a stacked bar chart with the classes along the x-asis - 1, 2, and 3 - and the bars filled with black or gray based the proportion that survived or perished."}

. . . 

> Roughly 68 percent of those passengers who were in the first class survived the wreckage of the Titanic. 

. . . 

{{< countdown "1:00" >}}

## Which measure of center/spread is least appropriate?

```{r}
library(patchwork)

p1 <- penguins |>
  filter(species == "Gentoo",
         sex == "male") |>
  ggplot(mapping = aes(x = body_mass_g)) +
  geom_histogram(color = "white",
                 bins = 10) +
  labs(title = "Image 1")


p2 <- class_survey |>
  filter(covid >0,
         covid < 1) |>
  ggplot(mapping = aes(x = covid)) +
  geom_histogram(color = "white", bins = 10) +
  labs(title = "Image 2")

p1 / p2

```

{{< countdown "1:00" >}}

## What are the aesthetics and geometry of this plot?

```{r}
#| fig-align: center
#| fig-width: 11
library(tidyverse)
library(palmerpenguins)

ggplot(penguins, aes(x = bill_length_mm,
                     fill = species)) +
    geom_density() +
    theme_gray(base_size = 20)
```

. . . 

{{< countdown "1:00" >}}

## What has not changed when moving from left to right?

```{r}
#| fig-align: center
#| fig-width: 11
library(patchwork)
p1 <- ggplot(penguins, aes(x = bill_length_mm,
                           y = bill_depth_mm,
                           color = species)) +
    geom_point(size=2) +
    theme_gray(base_size = 20) +
    theme(legend.position = "none") 
p2 <- ggplot(penguins, aes(x = bill_length_mm,
                           y = bill_depth_mm,
                           shape = species)) +
    geom_point(size=5, alpha = .5) +
    theme_bw(base_size = 20) +
    lims(y = c(10,24)) +
    theme(legend.position = "none") +
    xlab("Bill Length (in millimeters)") +
    annotate(geom = "text", x = 45, y = 11,
             label = "Gentoo", size = 5) +
    annotate(geom = "segment", x = 45, y = 11.2,
             xend = 45, yend = 13, 
             size = 1)
p1 + p2
```

# Break

{{< countdown "5:00" >}}

# Worksheet: A Grammar of Graphics

{{< countdown "15:00" >}}